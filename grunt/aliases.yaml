default:
  - rebuild

fetch:
  - get_tweets
  - get_recent_tracks

transform:
  - exec:clean
  - images
  - concat:xml
  - exec:transform
  - exec:remove_xml
  - exec:logpaths
  - htmlmin

images:
  - imagemin

css:
  - sass
  - autoprefixer
  - cssmin

js:
  - browserify:prod

'js:dev':
  - jshint
  - browserify:dev

rebuild:
  - fetch
  - transform
  - css
  - js

# AWS tasks
clean_production:
  - aws_s3:clean_production

push_production:
  - cacheBust
  - compress
  - aws_s3:push_production_assets
  - aws_s3:push_production_html

refresh_production:
  - rebuild
  - clean_production
  - push_production

# Task to run on crontab
cron:
  - rebuild
  - push_production
